!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";function s(e){let t=0;$("#wiki-data").empty(),$.each(e,(e,i)=>{const s=`https://ru.wikipedia.org/w/api.php?format=json&action=query&origin=*&prop=extracts&explaintext=&titles=${i}`;$.ajax({url:s,type:"GET",success:e=>{$.each(e.query.pages,(e,i)=>{let s=i.extract;t+=s.length})}})}),setTimeout(function(){const i=t/e.length;$("#wiki-data").append($(`<p>Среднее количество символов по выгруженным статьям - ${i}</p>`))},1e3)}function r(e){let t=[],i=[];$.each(e,(e,s)=>{const r=`https://ru.wikipedia.org/w/api.php?action=query&origin=*&prop=revisions&titles=${s}&format=json`;$.ajax({url:r,type:"GET",success:e=>{$.each(e.query.pages,(e,s)=>{let r=s.revisions[0].timestamp;t.push(r),i.push({title:s.title,date:r})})}})}),setTimeout(function(){const e=t.reduce((e,t)=>e>t?e:t);$.each(t,(t,s)=>{if(i[t].date==e){let e=i[t].date.replace("T"," ");e=e.replace("Z"," "),$("#wiki-data").append($(`<p>Самая свежая статья - "${i[t].title}" была обновлена ${e}</p>`))}});const s=t.reduce((e,t)=>e<t?e:t);$.each(t,(e,t)=>{if(i[e].date==s){let t=i[e].date.replace("T"," ");t=t.replace("Z"," "),$("#wiki-data").append($(`<p>Самая старая статья - "${i[e].title}" была обновлена ${t}</p>`))}})},500)}function n(){const e=Date.now();let t=0;const i=function(){const e=new Date;return`${("0"+e.getDate()).slice(-2)}.${("0"+(e.getMonth()+1)).slice(-2)}.${e.getFullYear()} ${("0"+e.getHours()).slice(-2)}.${("0"+e.getMinutes()).slice(-2)}`}(),n=document.getElementById("search-form__input");if(""==n.value)return void alert("Необходимо ввести текст в поле поиска!");let a;var o;o=n.value,a=o.replace(/[^\s-a-zA-ZА-Яа-яЁё]/gi,"").replace(/\s+/gi,", ");const l="http://ru.wikipedia.org/w/api.php?action=opensearch&origin=*&search="+encodeURI(a)+"&profile=strict&limit=5&format=json";$.ajax({url:l,type:"GET",success:n=>{if(0!=n[1].length){$("#wiki-items").empty();for(let e=0;e<n[1].length;e++)$("#wiki-items").append($('<h5><a href="'+n[3][e]+'">'+n[1][e]+"</a></h5>")),$("#wiki-items").append($("<p>"+n[2][e]+"</p>"));setTimeout(s,100,n[1]),setTimeout(r,100,n[1]),t=Date.now()-e,function(e,t,i){let s=[];if(null!==localStorage.getItem("queries")){const e=JSON.parse(localStorage.getItem("queries"));$.each(e,(e,t)=>{s.push(t)})}10==s.length&&s.shift(),s.push({query:e,queryTime:t,loadTime:i});const r=JSON.stringify(s);localStorage.setItem("queries",r)}(a,i,t)}else alert("Не найдено ни одной статьи:(")}})}function a(e){$("#wiki-queries tbody").empty(),$.each(e,(e,t)=>{const i='<tr class="userQuery"><td class="query">'+t.query+'</td><td class="queryTime">'+t.queryTime+'</td><td class="queryLoadTime">'+t.loadTime+"</td></tr>";$("#wiki-queries tbody").append($(i))})}function o(e){const t=e.find(".filter");e.find(".userQuery").each(function(e){let i=!0;$(this).find("td").each(function(e){t.eq(e).val()&&-1==$(this).html().toLowerCase().indexOf(t.eq(e).val().toLowerCase())&&(i=i&&!1)}),!0===i?$(this).css("display",""):$(this).css("display","none")})}i.r(t);let l=1,c=1,u=1;function d(e){let t=[];const i=document.getElementsByClassName("query"),s=document.getElementsByClassName("queryTime"),r=document.getElementsByClassName("queryLoadTime");$("#wiki-queries tbody tr").each((e,n)=>{t.push({query:i[e].textContent,queryTime:s[e].textContent,loadTime:r[e].textContent})}),"byQuery"==e&&(1!=l?t.reverse():t.sort((e,t)=>e.query.localeCompare(t.query)),l++,c=1,u=1),"byQueryTime"==e&&(1!=c?t.reverse():t.sort((e,t)=>e.queryTime.localeCompare(t.queryTime)),l=1,c++,u=1),"byQueryLoadTime"==e&&(1!=u?t.reverse():t.sort((e,t)=>e.loadTime-t.loadTime),l=1,c=1,u++),a(t),""!==$("#wiki-queries table").find(".filter").value&&o($("#wiki-queries table"))}const p=document.getElementById("wiki-items"),y=document.getElementById("wiki-queries"),m=document.getElementById("wiki-data"),f=document.getElementById("wiki-statistics");$(document).ready(()=>{let e=document.head,t=document.createElement("link");t.rel="stylesheet","dark"===localStorage.getItem("themeStyle")?t.href="../css/dark.css":t.href="../css/light.css",e.appendChild(t),$("#search-form").submit(e=>{e.preventDefault(),n(),p.style.display="block",y.style.display="none",m.style.display="block",f.style.display="none"}),$("#getOldQueries").on("click",()=>{a(JSON.parse(localStorage.getItem("queries"))),p.style.display="none",y.style.display="block",m.style.display="none",f.style.display="none"}),$("#sortQueries").on("click",()=>{d("byQuery")}),$("#sortQueriesTime").on("click",()=>{d("byQueryTime")}),$("#sortQueriesLoadTime").on("click",()=>{d("byQueryLoadTime")}),$(".filter").on("input",function(){o($(this).parents("table"))}),$("#getStatistics").on("click",()=>{!function(){$("#wiki-statistics").empty();const e=JSON.parse(localStorage.getItem("queries"));$.each(e,(e,t)=>{var i=document.createElement("div");i.style.height=`${t.loadTime}px`,i.textContent=`${t.query} - ${t.loadTime}`,$("#wiki-statistics").append($(i))})}(),p.style.display="none",y.style.display="none",m.style.display="none",f.style.display="flex"}),$("#switchStyle").on("click",()=>{"light"==localStorage.getItem("themeStyle")?(t.href="../css/dark.css",localStorage.setItem("themeStyle","dark")):(t.href="../css/light.css",localStorage.setItem("themeStyle","light"))})})}]);